{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "otp-input",
  "type": "registry:ui",
  "dependencies": [
    "framer-motion",
    "lucide-react"
  ],
  "files": [
    {
      "path": "components/ui/otp-input.tsx",
      "content": "'use client';\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport { AnimatePresence, motion, Transition, useAnimationControls } from 'framer-motion';\r\nimport { cn } from '@/lib/utils';\r\nimport { Check } from 'lucide-react';\r\n\r\nconst OTPSuccess = () => (\r\n    <div className=\"flex items-center gap-4 w-full\">\r\n        <motion.div\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            transition={{ delay: 0.3 }}\r\n            className=\"w-9 h-10 bg-green-500 ring-4 ring-green-800 text-white flex items-center justify-center rounded-lg\"\r\n        >\r\n            <Check size={16} strokeWidth={3} />\r\n        </motion.div>\r\n        <motion.p\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            transition={{ delay: 0.4 }}\r\n            className=\"text-green-500 font-medium\"\r\n        >\r\n            OTP Verified Successfully!\r\n        </motion.p>\r\n    </div>\r\n);\r\n\r\nconst OTPError = () => (\r\n    <motion.div\r\n        initial={{ opacity: 0 }}\r\n        animate={{ opacity: 1 }}\r\n        transition={{ duration: 0.2 }}\r\n        className=\"text-center text-red-400 font-medium mt-2\"\r\n    >\r\n        Invalid OTP\r\n    </motion.div>\r\n);\r\n\r\nconst OTPInputBox = ({\r\n    index,\r\n    verifyOTP,\r\n    state\r\n}: {\r\n    index: number;\r\n    verifyOTP: () => boolean | null;\r\n    state: 'idle' | 'error' | 'success';\r\n}) => {\r\n    const animationControls = useAnimationControls();\r\n\r\n    const springTransition: Transition = { type: 'spring', stiffness: 700, damping: 20, delay: index * 0.05 };\r\n    const noDelaySpringTransition: Transition = { type: 'spring', stiffness: 700, damping: 20 };\r\n    const slowSuccessTransition: Transition = { type: 'spring', stiffness: 300, damping: 30, delay: index * 0.06 };\r\n\r\n    useEffect(() => {\r\n        animationControls.start({ opacity: 1, y: 0, transition: springTransition });\r\n        return () => animationControls.stop();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (state === 'success') {\r\n            animationControls.start({ x: -index * 44, transition: slowSuccessTransition });\r\n        }\r\n    }, [state]);\r\n\r\n    const onFocus = () => animationControls.start({ y: -5, transition: noDelaySpringTransition });\r\n    const onBlur = () => animationControls.start({ scale: 1, y: 0, transition: noDelaySpringTransition });\r\n\r\n    const onKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n        const value = (e.target as HTMLInputElement).value;\r\n        if (e.key === 'Backspace' && value) {\r\n            (e.target as HTMLInputElement).value = '';\r\n        } else if (e.key === 'Backspace' && !value && index > 0) {\r\n            document.getElementById('otp-input-' + (index - 1))?.focus();\r\n        } else if (index > 0 && e.key === 'ArrowLeft') {\r\n            document.getElementById('otp-input-' + (index - 1))?.focus();\r\n        } else if (index < 5 && e.key === 'ArrowRight') {\r\n            document.getElementById('otp-input-' + (index + 1))?.focus();\r\n        }\r\n    };\r\n\r\n    const onInput = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const lastDigit = e.target.value[e.target.value.length - 1];\r\n        if (lastDigit) e.target.value = lastDigit;\r\n        if (e.target.value.length === 1 && index < 5) {\r\n            document.getElementById('otp-input-' + (index + 1))?.focus();\r\n        }\r\n        const verified = verifyOTP();\r\n        if (verified === null) return;\r\n        if (verified === true) e.target.blur();\r\n    };\r\n\r\n    return (\r\n        <motion.div\r\n            className={cn(\r\n                'w-9 h-10 bg-neutral-100 dark:bg-neutral-800 rounded-lg ring-2 ring-transparent focus-within:shadow-inner overflow-hidden',\r\n                state === 'error' ? 'ring-red-400' : state === 'success' ? 'ring-green-500' : 'focus-within:ring-blue-500'\r\n            )}\r\n            initial={{ opacity: 0, y: 10 }}\r\n            animate={animationControls}\r\n        >\r\n            <motion.input\r\n                id={'otp-input-' + index}\r\n                onInput={onInput}\r\n                onKeyDown={onKeyDown}\r\n                onFocus={onFocus}\r\n                onBlur={onBlur}\r\n                placeholder=\"0\"\r\n                className=\"border-none outline-none w-9 h-10 text-center bg-transparent placeholder:text-neutral-400 dark:placeholder:text-neutral-600 caret-transparent\"\r\n                disabled={state === 'success'}\r\n            />\r\n        </motion.div>\r\n    );\r\n};\r\n\r\ninterface OTPInputProps {\r\n    correctOTP?: string;\r\n    onSuccess?: () => void;\r\n    onError?: () => void;\r\n}\r\n\r\nexport function OTPInput({ correctOTP = '424242', onSuccess, onError }: OTPInputProps) {\r\n    const [state, setState] = useState<'idle' | 'error' | 'success'>('idle');\r\n    const animationControls = useAnimationControls();\r\n\r\n    const errorAnimation = async () => {\r\n        setState('error');\r\n        onError?.();\r\n        await animationControls.start({ x: [0, 3, -3, 3, -3, 0], transition: { duration: 0.1, ease: 'easeInOut' } });\r\n    };\r\n\r\n    const verifyOTP = () => {\r\n        let code = '';\r\n        for (let i = 0; i < 6; i++) {\r\n            const input = document.getElementById('otp-input-' + i) as HTMLInputElement;\r\n            if (input) code += input.value;\r\n        }\r\n\r\n        if (code.length === 6) {\r\n            if (code === correctOTP) {\r\n                setState('success');\r\n                onSuccess?.();\r\n                return true;\r\n            } else {\r\n                errorAnimation();\r\n                return false;\r\n            }\r\n        } else {\r\n            setState('idle');\r\n            return null;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex flex-col items-center justify-center gap-2\">\r\n            <div className=\"relative\">\r\n                <AnimatePresence>\r\n                    {state !== 'success' && (\r\n                        <motion.p\r\n                            initial={{ opacity: 0 }}\r\n                            animate={{ opacity: 1 }}\r\n                            exit={{ opacity: 0 }}\r\n                            className=\"absolute text-center w-full bottom-full left-0 mb-4 font-medium text-lg\"\r\n                        >\r\n                            OTP Verification\r\n                        </motion.p>\r\n                    )}\r\n                </AnimatePresence>\r\n                <motion.div animate={animationControls} className=\"flex items-center justify-center gap-2\">\r\n                    {Array.from({ length: 6 }).map((_, index) => (\r\n                        <OTPInputBox key={'otp-input-' + index} index={index} verifyOTP={verifyOTP} state={state} />\r\n                    ))}\r\n                </motion.div>\r\n                {state === 'success' && <div className=\"absolute inset-0 top-0 left-0\"><OTPSuccess /></div>}\r\n                {state === 'error' && <div className=\"absolute inset-0 top-full left-0\"><OTPError /></div>}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default OTPInput;\r\n",
      "type": "registry:ui",
      "target": "components/ui/otp-input.tsx"
    }
  ]
}