{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "photo-gallery",
  "type": "registry:ui",
  "dependencies": [
    "framer-motion"
  ],
  "files": [
    {
      "path": "components/ui/photo-gallery.tsx",
      "content": "'use client';\n\nimport React, { useState, memo, useRef } from 'react';\nimport { cn } from '@/lib/utils';\nimport Image from 'next/image';\nimport { motion } from 'framer-motion';\n\nexport interface Photo {\n  url: string;\n  title?: string;\n}\n\nconst DUMMY_PHOTOS: Photo[] = [\n  {\n    url: '/avatars/powerpuff.png',\n    title: 'Powerpuff Girls'\n  },\n  {\n    url: '/avatars/buggbunny.jpg',\n    title: 'Bugs Bunny'\n  },\n  {\n    url: '/avatars/taz.jpg',\n    title: 'Taz The Tazmanian Devil'\n  },\n  {\n    url: '/avatars/johnnybravo.jpg',\n    title: 'Johnny Bravo'\n  },\n  {\n    url: '/avatars/courage.jpg',\n    title: 'Courage The Cowardly Dog'\n  },\n  {\n    url: '/avatars/kick.jpg',\n    title: 'Kick Buttowski'\n  },\n  {\n    url: '/avatars/phineas.jpg',\n    title: 'Phineas'\n  },\n  {\n    url: '/avatars/platypus.jpg',\n    title: 'Platypus Perry'\n  },\n  {\n    url: '/avatars/dexter.jpg',\n    title: 'Dexter'\n  }\n];\n\nconst Vignette = memo(() => {\n  return (\n    <div\n      className=\"absolute inset-0 z-20 pointer-events-none\"\n      style={{\n        background:\n          'linear-gradient(to right, #111111 0%, transparent 10%, transparent 90%, #111111 100%)',\n        willChange: 'auto'\n      }}\n    ></div>\n  );\n});\nVignette.displayName = 'Vignette';\n\nconst SelectedPhotoItem = memo(\n  ({\n    selectedPhoto,\n    setSelectedPhoto,\n    photos,\n    selectedPhotoIndex\n  }: {\n    selectedPhoto: { rowIndex: number; index: number };\n    setSelectedPhoto: (photo: { rowIndex: number; index: number } | null) => void;\n    photos: Photo[];\n    selectedPhotoIndex: number;\n  }) => {\n    return (\n      <motion.div\n        initial={{ opacity: 0.1 }}\n        animate={{ opacity: 1 }}\n        transition={{ duration: 0.2 }}\n        onClick={() => setSelectedPhoto(null)}\n        className=\"absolute inset-0 z-10 bg-black/50 backdrop-blur-sm flex flex-col items-center justify-center\"\n      >\n        <motion.div\n          layout\n          layoutId={`photo-${selectedPhoto.rowIndex}-${selectedPhoto.index}`}\n          transition={{ duration: 0.15, ease: 'easeOut' }}\n          className=\"relative w-72 h-72 overflow-hidden z-20\"\n        >\n          <Image\n            src={photos[selectedPhotoIndex].url}\n            alt={photos[selectedPhotoIndex].title || 'Untitled Image'}\n            fill\n            className=\"object-cover rounded-3xl border-[8px] border-white\"\n          />\n        </motion.div>\n        {photos[selectedPhotoIndex].title && (\n          <div className=\"max-w-72 w-full text-center mt-2 font-medium text-xl flex items-center justify-center text-white\">\n            <motion.span\n              initial={{ opacity: 0.1, y: 10 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0.1, y: 10 }}\n              key={`photo-title-${selectedPhoto.rowIndex}-${selectedPhoto.index}`}\n              transition={{ duration: 0.2 }}\n            >\n              {photos[selectedPhotoIndex].title}\n            </motion.span>\n          </div>\n        )}\n      </motion.div>\n    );\n  }\n);\nSelectedPhotoItem.displayName = 'SelectedPhotoItem';\n\nconst PhotoItem = ({\n  rowIndex,\n  photo,\n  index,\n  setSelectedPhoto\n}: {\n  rowIndex: number;\n  photo: Photo;\n  index: number;\n  setSelectedPhoto: (photo: { rowIndex: number; index: number }) => void;\n}) => {\n  const [loading, setLoading] = useState(true);\n  const [inView, setInView] = useState(false);\n  const itemRef = useRef<HTMLDivElement>(null);\n\n  React.useEffect(() => {\n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        setInView(entry.isIntersecting);\n      },\n      { threshold: 0.1, rootMargin: '50px' }\n    );\n\n    if (itemRef.current) {\n      observer.observe(itemRef.current);\n    }\n\n    return () => observer.disconnect();\n  }, []);\n\n  return (\n    <motion.div\n      ref={itemRef}\n      layout\n      layoutId={`photo-${rowIndex}-${index}`}\n      key={`photo-${rowIndex}-${index}`}\n      initial={{ opacity: 0, y: 20 }}\n      whileInView={{\n        opacity: 1,\n        y: 0,\n        transition: { duration: 0.2, delay: 0.05 }\n      }}\n      transition={{ duration: 0.15, ease: 'easeOut' }}\n      className=\"h-20 w-20 rounded-xl relative overflow-hidden shrink-0 border-[2px] border-zinc-900 hover:border-zinc-100 cursor-pointer transition-colors duration-75\"\n      style={{ willChange: 'transform, opacity' }}\n      onClick={() => setSelectedPhoto({ rowIndex, index })}\n      viewport={{ once: true }}\n    >\n      {loading && <div className=\"w-full h-full bg-zinc-800 animate-pulse\"></div>}\n      {inView && (\n        <Image\n          src={photo.url}\n          alt={photo.title || 'Untitled Image'}\n          fill\n          className=\"object-cover\"\n          onLoad={() => setLoading(false)}\n          loading=\"lazy\"\n        />\n      )}\n    </motion.div>\n  );\n};\n\nconst PhotoGallery = ({\n  photos = Array.from({ length: 80 }).map((_, index) => DUMMY_PHOTOS[index % DUMMY_PHOTOS.length]),\n  rows = 5,\n  className = '',\n  vignette = true,\n  title = 'POV: You had a great childhood'\n}: {\n  photos?: Photo[];\n  rows?: number;\n  className?: string;\n  vignette?: boolean;\n  title?: string;\n}) => {\n  const [selectedPhoto, setSelectedPhoto] = useState<{ rowIndex: number; index: number } | null>(\n    null\n  );\n  const displayPhotos = photos;\n  const scrollContainerRef = useRef<HTMLDivElement>(null);\n\n  const selectedPhotoIndex = selectedPhoto\n    ? Math.floor((selectedPhoto.rowIndex * photos.length) / rows) + selectedPhoto.index\n    : 0;\n\n  return (\n    <div className=\"flex flex-col gap-6 h-full w-full items-center justify-center\">\n      <h1 className=\"text-lg lg:text-xl\">{title}</h1>\n      <div className=\"relative h-full w-full overflow-y-hidden p-0\">\n        {vignette && <Vignette />}\n        {selectedPhoto && (\n          <SelectedPhotoItem\n            selectedPhoto={selectedPhoto}\n            setSelectedPhoto={setSelectedPhoto}\n            photos={displayPhotos}\n            selectedPhotoIndex={selectedPhotoIndex}\n          />\n        )}\n        <div\n          ref={scrollContainerRef}\n          className={cn('flex flex-col gap-2 w-full overflow-x-auto h-full relative', className)}\n        >\n          {Array.from({ length: rows }).map((_, rowIndex) => {\n            const currentPhotos = displayPhotos.slice(\n              (rowIndex * displayPhotos.length) / rows,\n              ((rowIndex + 1) * displayPhotos.length) / rows\n            );\n            return (\n              <div\n                key={`row-${rowIndex}`}\n                className={cn(\n                  'flex items-center gap-2 relative w-full',\n                  rowIndex % 2 === 0 ? '-translate-x-8' : ''\n                )}\n              >\n                {currentPhotos.map((photo, index) => (\n                  <PhotoItem\n                    key={`photo-${rowIndex}-${index}`}\n                    rowIndex={rowIndex}\n                    photo={photo}\n                    index={index}\n                    setSelectedPhoto={setSelectedPhoto}\n                  />\n                ))}\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PhotoGallery;\n",
      "type": "registry:ui",
      "target": "components/ui/photo-gallery.tsx"
    }
  ]
}
