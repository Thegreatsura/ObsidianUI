{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "rubik-cube",
  "type": "registry:ui",
  "dependencies": [
    "framer-motion"
  ],
  "files": [
    {
      "path": "components/ui/rubik-cube.tsx",
      "content": "'use client';\r\n\r\nimport React, { useEffect } from 'react';\r\nimport { motion, useMotionValue, useTransform, animate, useAnimationControls } from 'framer-motion';\r\nimport { cn } from '@/lib/utils';\r\n\r\nconst SIZE = 48;\r\n\r\nconst dimensionModes = [\r\n    { mode: '2x2', center: [] },\r\n    { mode: '3x3', center: [4] },\r\n    { mode: '4x4', center: [5, 6, 9, 10] }\r\n];\r\n\r\nconst Piece = ({\r\n    config,\r\n    index,\r\n    mode,\r\n    isCenterPiece\r\n}: {\r\n    config: { color: string; position: string };\r\n    index: number;\r\n    mode: number;\r\n    isCenterPiece: boolean;\r\n}) => {\r\n    const getGlassColor = (index: number) => {\r\n        const colors = [\r\n            'rgba(255, 255, 255, 0.15)',\r\n            'rgba(173, 216, 230, 0.2)',\r\n            'rgba(240, 248, 255, 0.18)',\r\n            'rgba(230, 230, 250, 0.16)',\r\n            'rgba(255, 250, 240, 0.17)',\r\n            'rgba(245, 245, 245, 0.19)',\r\n            'rgba(248, 248, 255, 0.14)',\r\n            'rgba(250, 235, 215, 0.15)',\r\n            'rgba(255, 245, 238, 0.16)'\r\n        ];\r\n        return colors[index % colors.length];\r\n    };\r\n\r\n    return (\r\n        <motion.div\r\n            style={{ height: SIZE, width: SIZE }}\r\n            animate={{\r\n                backgroundColor: mode === 2 ? getGlassColor(index) : mode === 0 ? 'rgba(0, 0, 0, 0)' : config.color,\r\n                borderColor: mode === 0 ? (index % 2 === 0 ? 'rgba(220, 220, 220, 1)' : 'rgba(200, 200, 200, 1)') : mode === 2 ? 'rgba(255, 255, 235, 1)' : '#000000',\r\n                backdropFilter: mode === 2 ? 'blur(4px)' : 'none'\r\n            }}\r\n            transition={{ duration: 0.3, ease: 'linear', delay: index * 0.05 }}\r\n            className={cn('border-[1.5px] relative shrink-0', isCenterPiece && 'z-10')}\r\n        >\r\n            {isCenterPiece && mode !== 0 && (\r\n                <>\r\n                    <div className=\"absolute top-0 left-0 -translate-x-[calc(50%+2px)] -translate-y-[calc(50%+2px)] rotate-45 w-3 h-3 bg-black z-[1000]\" />\r\n                    <div className=\"absolute top-0 right-0 translate-x-[calc(50%+2px)] -translate-y-[calc(50%+2px)] rotate-45 w-3 h-3 bg-black z-[1000]\" />\r\n                    <div className=\"absolute bottom-0 right-0 translate-x-[calc(50%+2px)] translate-y-[calc(50%+2px)] rotate-45 w-3 h-3 bg-black z-[1000]\" />\r\n                    <div className=\"absolute bottom-0 left-0 -translate-x-[calc(50%+2px)] translate-y-[calc(50%+2px)] rotate-45 w-3 h-3 bg-black z-[1000]\" />\r\n                </>\r\n            )}\r\n        </motion.div>\r\n    );\r\n};\r\n\r\ninterface FaceProps {\r\n    config: { color: string; position: string };\r\n    mode: number;\r\n    dimensionMode: number;\r\n}\r\n\r\nconst Face = ({ config, mode, dimensionMode }: FaceProps) => {\r\n    const DISPLACEMENT_MULTIPLIER = dimensionMode === 0 ? 1 : dimensionMode === 1 ? 1.5 : 2;\r\n    const calculatedPosition = { rotateX: 0, rotateY: 0, translateY: 0, translateZ: 0, translateX: 0 };\r\n\r\n    if (config.position === 'top') { calculatedPosition.rotateX = 90; calculatedPosition.translateY = -SIZE * DISPLACEMENT_MULTIPLIER; }\r\n    else if (config.position === 'back') { calculatedPosition.translateZ = SIZE * DISPLACEMENT_MULTIPLIER; }\r\n    else if (config.position === 'front') { calculatedPosition.translateZ = -SIZE * DISPLACEMENT_MULTIPLIER; }\r\n    else if (config.position === 'bottom') { calculatedPosition.translateY = SIZE * DISPLACEMENT_MULTIPLIER; calculatedPosition.rotateX = -90; }\r\n    else if (config.position === 'right') { calculatedPosition.rotateY = 90; calculatedPosition.translateX = SIZE * DISPLACEMENT_MULTIPLIER; }\r\n    else if (config.position === 'left') { calculatedPosition.rotateY = -90; calculatedPosition.translateX = -SIZE * DISPLACEMENT_MULTIPLIER; }\r\n\r\n    return (\r\n        <motion.div\r\n            style={{ ...calculatedPosition, transformStyle: 'preserve-3d', backfaceVisibility: 'visible' }}\r\n            className={cn('grid absolute shrink-0', dimensionMode === 0 ? 'grid-cols-2' : dimensionMode === 1 ? 'grid-cols-3' : 'grid-cols-4')}\r\n        >\r\n            {Array.from({ length: dimensionMode === 0 ? 4 : dimensionMode === 1 ? 9 : 16 }).map((_, index) => (\r\n                <Piece key={'face' + config.position + index} config={config} index={index} isCenterPiece={dimensionModes[dimensionMode].center.includes(index)} mode={mode} />\r\n            ))}\r\n        </motion.div>\r\n    );\r\n};\r\n\r\ninterface RubikCubeProps {\r\n    mode?: 'skeleton' | 'normal' | 'glass';\r\n    dimensionMode?: '2x2' | '3x3' | '4x4';\r\n}\r\n\r\nexport function RubikCube({ mode = 'normal', dimensionMode = '3x3' }: RubikCubeProps) {\r\n    const controls = useAnimationControls();\r\n    const faceColors = [\r\n        { color: '#C41E3A', position: 'left' },\r\n        { color: '#FF5800', position: 'right' },\r\n        { color: '#009E60', position: 'top' },\r\n        { color: '#0051BA', position: 'bottom' },\r\n        { color: '#FFD500', position: 'front' },\r\n        { color: '#ffffff', position: 'back' }\r\n    ];\r\n\r\n    const rotateX = useMotionValue(45);\r\n    const rotateY = useMotionValue(45);\r\n    const dragRotateX = useTransform(rotateX, (value) => value);\r\n    const dragRotateY = useTransform(rotateY, (value) => value);\r\n\r\n    const handleDragEnd = async () => {\r\n        await Promise.all([\r\n            animate(rotateX, 45, { duration: 0.8, ease: 'easeOut' }),\r\n            animate(rotateY, 45, { duration: 0.8, ease: 'easeOut' })\r\n        ]);\r\n        controls.start({\r\n            rotateX: [45, 405],\r\n            rotateY: [45, -405],\r\n            transition: { duration: 10, ease: 'linear', repeat: Infinity, repeatType: 'loop' }\r\n        });\r\n    };\r\n\r\n    useEffect(() => { handleDragEnd(); }, []);\r\n\r\n    const modeIndex = ['skeleton', 'normal', 'glass'].indexOf(mode);\r\n    const dimensionModeIndex = dimensionModes.findIndex((m) => m.mode === dimensionMode);\r\n\r\n    return (\r\n        <div className=\"flex items-center justify-center relative\">\r\n            <motion.div\r\n                style={{\r\n                    height: SIZE * (dimensionModeIndex === 0 ? 2 : dimensionModeIndex === 1 ? 3 : 4),\r\n                    width: SIZE * (dimensionModeIndex === 0 ? 2 : dimensionModeIndex === 1 ? 3 : 4),\r\n                    perspective: '10000px',\r\n                    transformStyle: 'preserve-3d',\r\n                    rotateX: dragRotateX,\r\n                    rotateY: dragRotateY,\r\n                    cursor: 'grab'\r\n                }}\r\n                animate={controls}\r\n                drag\r\n                dragConstraints={{ left: 0, right: 0, top: 0, bottom: 0 }}\r\n                dragElastic={0.1}\r\n                dragSnapToOrigin={true}\r\n                onDrag={(event, info) => { rotateY.set(rotateY.get() + info.delta.x * 0.5); rotateX.set(rotateX.get() - info.delta.y * 0.5); }}\r\n                onDragStart={() => controls.stop()}\r\n                onDragEnd={handleDragEnd}\r\n                className=\"relative flex flex-wrap items-center justify-center\"\r\n            >\r\n                {faceColors.map((config, index) => (\r\n                    <Face key={'face' + index} config={config} mode={modeIndex} dimensionMode={dimensionModeIndex} />\r\n                ))}\r\n            </motion.div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default RubikCube;\r\n",
      "type": "registry:ui",
      "target": "components/ui/rubik-cube.tsx"
    }
  ]
}